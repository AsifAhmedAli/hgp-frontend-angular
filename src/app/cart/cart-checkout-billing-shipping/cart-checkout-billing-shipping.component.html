
  <div class="ps-form__billings">
    <h4 class="ps-form__heading">Billing</h4>
    <div class="row">

      <div class="col-sm-12" *ngIf="addressBooks.length">
        <div class="form-group">
          <label>Select From saved billing addresses</label>
          <select class="ps-select form-control" (change)="onChangeAddress($event.target, 'billing')">
            <option appFirstOption title="Address Book"></option>
            <option *ngFor="let book of addressBooks" [value]="book?.id">{{ book?.nickname | titlecase }}</option>
          </select>
        </div>
      </div>

      <div class="col-sm-6" *ngIf="false">
        <div class="form-group">
          <label>First Name <sup>*</sup></label>
          <input class="form-control" type="text" placeholder="First Name" formControlName="billingFirstName">
        </div>
        <ng-template [ngIf]="shippingForm.get('billingFirstName').touched || shippingForm.get('billingFirstName').dirty">
          <div class="error-fld" *ngIf="shippingForm.get('billingFirstName').hasError('required')">{{ MESSAGES.required }}</div>
          <div class="error-fld" *ngIf="shippingForm.get('billingFirstName').hasError('maxlength')">{{ MESSAGES.varcharMaxLength }}</div>
        </ng-template>
      </div>
      <div class="col-sm-6" *ngIf="false">
        <div class="form-group">
          <label>Last Name <sup>*</sup></label>
          <input class="form-control" type="text" placeholder="Last Name" formControlName="billingLastName">
        </div>
        <ng-template [ngIf]="shippingForm.get('billingLastName').touched || shippingForm.get('billingLastName').dirty">
          <div class="error-fld" *ngIf="shippingForm.get('billingLastName').hasError('required')">{{ MESSAGES.required }}</div>
          <div class="error-fld" *ngIf="shippingForm.get('billingLastName').hasError('maxlength')">{{ MESSAGES.varcharMaxLength }}</div>
        </ng-template>
      </div>

      <div class="col-sm-12">
        <div class="form-group">
          <label>Street Address <sup>*</sup></label>
          <input class="form-control" type="text" placeholder="Street Address" formControlName="billingAddress1">
        </div>
        <ng-template [ngIf]="shippingForm.get('billingAddress1').touched || shippingForm.get('billingAddress1').dirty">
          <div class="error-fld" *ngIf="shippingForm.get('billingAddress1').hasError('required')">{{ MESSAGES.required }}</div>
        </ng-template>
      </div>
      <div class="col-sm-12">
        <div class="form-group">
          <label>City <sup>*</sup></label>
          <input class="form-control" type="text" placeholder="City" formControlName="billingCity">
        </div>
        <ng-template [ngIf]="shippingForm.get('billingCity').touched || shippingForm.get('billingCity').dirty">
          <div class="error-fld" *ngIf="shippingForm.get('billingCity').hasError('required')">{{ MESSAGES.required }}</div>
          <div class="error-fld" *ngIf="shippingForm.get('billingCity').hasError('maxlength')">{{ MESSAGES.varcharMaxLength }}</div>
        </ng-template>
      </div>
      <div class="col-sm-12">
        <div class="form-group">
          <label>State <sup>*</sup></label>
          <select class="ps-select form-control" formControlName="billingState">
            <option appFirstOption title="State"></option>
            <option *ngFor="let state of states" [value]="state?.abbreviation">{{ state?.name | titlecase }}</option>
          </select>
        </div>
        <ng-template [ngIf]="shippingForm.get('billingState').touched || shippingForm.get('billingState').dirty">
          <div class="error-fld" *ngIf="shippingForm.get('billingState').hasError('required')">{{ MESSAGES.required }}</div>
          <div class="error-fld" *ngIf="shippingForm.get('billingState').hasError('maxlength')">{{ MESSAGES.stateMaxLength }}</div>
        </ng-template>
      </div>

      <div class="col-sm-12">
        <div class="form-group">
          <label>Zip Code<sup>  *</sup></label>
          <input class="form-control" type="text" placeholder="Zip Code" formControlName="billingZip">
        </div>
        <ng-template [ngIf]="shippingForm.get('billingZip').touched || shippingForm.get('billingZip').dirty">
          <div class="error-fld" *ngIf="shippingForm.get('billingZip').hasError('required')">{{ MESSAGES.required }}</div>
          <div class="error-fld" *ngIf="shippingForm.get('billingZip').hasError('minlength')">{{ MESSAGES.zipMinLength }}</div>
          <div class="error-fld" *ngIf="shippingForm.get('billingZip').hasError('maxlength')">{{ MESSAGES.zipMaxLength }}</div>
        </ng-template>
      </div>

      <div class="col-sm-6" *ngIf="false">
        <div class="form-group">
          <label>Email <sup>*</sup></label>
          <input class="form-control" type="text" placeholder="Email" formControlName="billingEmail">
        </div>
        <ng-template [ngIf]="shippingForm.get('billingEmail').dirty || shippingForm.get('billingEmail').touched">
          <div class="error-fld" *ngIf="shippingForm.get('billingEmail').hasError('required')">{{ MESSAGES.required }}</div>
          <div class="error-fld" *ngIf="shippingForm.get('billingEmail').hasError('email')">{{ MESSAGES.email }}</div>
          <div class="error-fld" *ngIf="!shippingForm.get('billingEmail').hasError('email') && shippingForm.get('billingEmail').hasError('maxlength')">{{ MESSAGES.varcharMaxLength }}</div>
        </ng-template>
      </div>
      <div class="col-sm-6" *ngIf="false">
        <div class="form-group">
          <label>Phone <sup>*</sup></label>
          <input class="form-control" mask="000-000-0000" [validation]="false" type="text" placeholder="Phone" formControlName="billingPhone">
        </div>
        <ng-template [ngIf]="shippingForm.get('billingPhone').touched || shippingForm.get('billingPhone').dirty">
          <div class="error-fld" *ngIf="shippingForm.get('billingPhone').hasError('required')">{{ MESSAGES.required }}</div>
          <div class="error-fld" *ngIf="shippingForm.get('billingPhone').hasError('minlength')">{{ MESSAGES.phoneMinLength }}</div>
        </ng-template>
      </div>
      <div class="col-sm-12" *ngIf="!isAuthenticated">
        <div class="form-group create-account">
          <div class="ps-checkbox">
            <input class="form-control" type="checkbox" id="createAccount" formControlName="createAccount"/>
            <label for="createAccount">Create an account</label>
          </div>
        </div>
      </div>
      <div class="col-sm-12">
        <div class="form-group shipping mt-4">
          <div class="ps-checkbox">
            <input class="form-control" type="checkbox" id="shipping" formControlName="isDifferentBilling" (change)="onCheckboxChange($event)" />
            <label class="ship-lbl" for="shipping"><strong>Ship to different address</strong></label>
          </div>
        </div>
      </div>

    </div>
  </div>
  <div class="col-md-12 differ-ship pl-0 pr-0" [class.d-none]="!differentBilling">
    <div class="row">

      <div class="col-sm-12" *ngIf="addressBooks.length">
        <div class="form-group">
          <label>Select from saved shipping addresses</label>
          <select class="ps-select form-control" (change)="onChangeAddress($event.target, 'shipping')">
            <option appFirstOption title="Address Book"></option>
            <option *ngFor="let book of addressBooks" [value]="book?.id">{{ book?.nickname | titlecase }}</option>
          </select>
        </div>
      </div>

      <div class="col-sm-6">
        <div class="form-group">
          <label>First Name <sup>*</sup></label>
          <input class="form-control" type="text" placeholder="First Name" formControlName="shippingFirstName">
        </div>
        <ng-template [ngIf]="shippingForm.get('shippingFirstName').touched || shippingForm.get('shippingFirstName').dirty">
          <div class="error-fld" *ngIf="shippingForm.get('shippingFirstName').hasError('required')">{{ MESSAGES.required }}</div>
          <div class="error-fld" *ngIf="shippingForm.get('shippingFirstName').hasError('maxlength')">{{ MESSAGES.varcharMaxLength }}</div>
        </ng-template>
      </div>
      <div class="col-sm-6">
        <div class="form-group">
          <label>Last Name <sup>*</sup></label>
          <input class="form-control" type="text" placeholder="Last Name" formControlName="shippingLastName">
        </div>
        <ng-template [ngIf]="shippingForm.get('shippingLastName').touched || shippingForm.get('shippingLastName').dirty">
          <div class="error-fld" *ngIf="shippingForm.get('shippingLastName').hasError('required')">{{ MESSAGES.required }}</div>
          <div class="error-fld" *ngIf="shippingForm.get('shippingLastName').hasError('maxlength')">{{ MESSAGES.varcharMaxLength }}</div>
        </ng-template>
      </div>
      <div class="col-sm-12">
        <div class="form-group">
          <label>Street Address <sup>*</sup></label>
          <input class="form-control" type="text" placeholder="Street Address" formControlName="shippingAddress1">
        </div>
        <ng-template [ngIf]="shippingForm.get('shippingAddress1').touched || shippingForm.get('shippingAddress1').dirty">
          <div class="error-fld" *ngIf="shippingForm.get('shippingAddress1').hasError('required')">{{ MESSAGES.required }}</div>
        </ng-template>
      </div>
      <div class="col-sm-12">
        <div class="form-group">
          <label>City <sup>*</sup></label>
          <input class="form-control" type="text" placeholder="City" formControlName="shippingCity">
        </div>
        <ng-template [ngIf]="shippingForm.get('shippingCity').touched || shippingForm.get('shippingCity').dirty">
          <div class="error-fld" *ngIf="shippingForm.get('shippingCity').hasError('required')">{{ MESSAGES.required }}</div>
          <div class="error-fld" *ngIf="shippingForm.get('shippingCity').hasError('maxlength')">{{ MESSAGES.varcharMaxLength }}</div>
        </ng-template>
      </div>
      <div class="col-sm-12">
        <div class="form-group">
          <label>State <sup>*</sup></label>
          <select class="ps-select form-control" formControlName="shippingState">
            <option appFirstOption title="State"></option>
            <option *ngFor="let state of states" [value]="state?.abbreviation">{{ state?.name | titlecase }}</option>
          </select>
        </div>
        <ng-template [ngIf]="shippingForm.get('shippingState').touched || shippingForm.get('shippingState').dirty">
          <div class="error-fld" *ngIf="shippingForm.get('shippingState').hasError('required')">{{ MESSAGES.required }}</div>
          <div class="error-fld" *ngIf="shippingForm.get('shippingState').hasError('maxlength')">{{ MESSAGES.stateMaxLength }}</div>
        </ng-template>
      </div>
      <div class="col-sm-12">
        <div class="form-group">
          <label>Zip Code<sup>  *</sup></label>
          <input class="form-control" type="text" placeholder="Zip Code" formControlName="shippingZip">
        </div>
        <ng-template [ngIf]="shippingForm.get('shippingZip').touched || shippingForm.get('shippingZip').dirty">
          <div class="error-fld" *ngIf="shippingForm.get('shippingZip').hasError('required')">{{ MESSAGES.required }}</div>
          <div class="error-fld" *ngIf="shippingForm.get('shippingZip').hasError('minlength')">{{ MESSAGES.zipMinLength }}</div>
          <div class="error-fld" *ngIf="shippingForm.get('shippingZip').hasError('maxlength')">{{ MESSAGES.zipMaxLength }}</div>
        </ng-template>
      </div>
      <div class="col-sm-6">
        <div class="form-group">
          <label>Email <sup>*</sup></label>
          <input class="form-control" type="text" placeholder="Email" formControlName="shippingEmail">
        </div>
        <ng-template [ngIf]="shippingForm.get('shippingEmail').dirty || shippingForm.get('shippingEmail').touched">
          <div class="error-fld" *ngIf="shippingForm.get('shippingEmail').hasError('required')">{{ MESSAGES.required }}</div>
          <div class="error-fld" *ngIf="shippingForm.get('shippingEmail').hasError('email')">{{ MESSAGES.email }}</div>
          <div class="error-fld" *ngIf="!shippingForm.get('shippingEmail').hasError('email') && shippingForm.get('shippingEmail').hasError('maxlength')">{{ MESSAGES.varcharMaxLength }}</div>
        </ng-template>
      </div>
      <div class="col-sm-6">
        <div class="form-group">
          <label>Phone <sup>*</sup></label>
          <input class="form-control" type="text" mask="000-000-0000" [validation]="false" placeholder="Phone" formControlName="shippingPhone">
        </div>
        <ng-template [ngIf]="shippingForm.get('shippingPhone').touched || shippingForm.get('shippingPhone').dirty">
          <div class="error-fld" *ngIf="shippingForm.get('shippingPhone').hasError('required')">{{ MESSAGES.required }}</div>
          <div class="error-fld" *ngIf="shippingForm.get('shippingPhone').hasError('minlength')">{{ MESSAGES.phoneMinLength }}</div>
        </ng-template>
      </div>
    </div>
  </div>
  <div class="form-group mt-5 mb-0 dk-submit">
     <app-submit-button [isSubmitting]="isSubmitting"></app-submit-button>
  </div>
